SRC_DIR = $(SRC_TREE)/condor_schedd

#if IS_SGI_IRIX53 || IS_SGI_IRIX62
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) -DNEW_PROC
#else
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) -DNEW_PROC -fexternal-templates
#endif

CFLAGS = $(STD_C_FLAGS) -DNEW_PROC

CPP = PreProcessCmd

LDFLAGS = $(LIBDBM)

CLASS_AD_LIB = ../condor_classad/expr_lib.a
DAEMON_CORE_LIB = ../condor_daemon_core.V6/daemon_core.a
CKPT_SERVER_LIB = ../condor_ckpt_server/ckpt_server_api.a

QMGMT_SRC = qmgmt.C qmgmt_receivers.C qmgmt_common.C
QMGMT_OBJ = qmgmt.o qmgmt_receivers.o qmgmt_common.o

HISTORY_SRC = get_history.57.c
SRC = stub.C schedd.C schedd_main.C $(QMGMT_SRC) stub.57.C event.c $(HISTORY_SRC) schedd.c
OBJ = stub.o schedd.o schedd_main.o $(QMGMT_OBJ)

LIB= $(DAEMON_CORE_LIB) $(CKPT_SERVER_LIB) ../condor_c++_util/cplus_lib.a $(CLASS_AD_LIB) ../condor_util_lib/util_lib.a RpcLib KernLib SocketLib

LIBDIRS=../condor_daemon_core.V6 ../condor_ckpt_server ../condor_c++_util ../condor_classad ../condor_util_lib

QMGR_LIB = $(LIB)

QMGR_SRC = qmgr.C $(QMGMT_SRC)
QMGR_OBJ = qmgr.o $(QMGMT_OBJ)

QMGMT_LIB_OBJ = qmgmt_send_stubs.o qmgr_lib_support.o qmgmt_common.o

all_target(condor_schedd libqmgmt.a)
tags_target($(SRC),$(LIBDIRS))
depend_target($(SRC))
c_plus_target(condor_schedd,$(OBJ),$(LIB))
pure_c_plus_target(condor_schedd.pure,$(OBJ),$(LIB))
purecov_c_plus_target(condor_schedd.pc,$(OBJ),$(LIB))
c_plus_target(qmgr,$(QMGR_OBJ), $(CLASS_AD_LIB) $(QMGR_LIB))
library_target(libqmgmt.a,$(QMGMT_LIB_OBJ))
release_target(condor_schedd,$(RELEASE_DIR)/bin,EXECUTABLE_MODE)
c_plus_target(qmgr_test, qmgr_test.o libqmgmt.a, $(LIB))

CMNT c_plus_target(qmgr_rm, qmgr_rm.o libqmgmt.a, $(LIB))

IMPORT_LINKS = ../../config/import_links
