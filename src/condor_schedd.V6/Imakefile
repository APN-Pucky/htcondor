SRC_DIR = $(SRC_TREE)/condor_schedd

C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) -fno-implicit-templates -DNEW_PROC
CFLAGS = $(STD_C_FLAGS) -DNEW_PROC

CPP = PreProcessCmd

LDFLAGS = RpcLib SocketLib

CLASS_AD_LIB = ../condor_classad/expr_lib.a
DAEMON_CORE_LIB = ../condor_daemon_core.V6/daemon_core.a

QMGMT_SRC = qmgmt.C qmgmt_receivers.C qmgmt_common.C
QMGMT_OBJ = qmgmt.o qmgmt_receivers.o qmgmt_common.o

QMGMT_LIB_OBJ = qmgmt_send_stubs.o qmgr_lib_support.o qmgmt_common.o

SRC = schedd.C schedd_main.C $(QMGMT_SRC) instantiate.C
OBJ = schedd.o schedd_main.o $(QMGMT_OBJ) instantiate.o

LIB= $(DAEMON_CORE_LIB) ../condor_c++_util/cplus_lib.a $(CLASS_AD_LIB) ../condor_util_lib/util_lib.a $(AUTH2_LIB)

LIBDIRS=../condor_daemon_core.V6 ../condor_ckpt_server ../condor_c++_util ../condor_classad ../condor_util_lib


all_target(condor_schedd libqmgmt.a)
tags_target($(SRC),$(LIBDIRS))
depend_target($(SRC))

library_target(libqmgmt.a,$(QMGMT_LIB_OBJ))

c_plus_target(qmgr_test, qmgr_test.o libqmgmt.a, $(LIB))
c_plus_target(condor_schedd,$(OBJ),$(LIB))
pure_c_plus_target(condor_schedd.pure,$(OBJ),$(LIB))

release_target(condor_schedd,$(RELEASE_DIR)/sbin,EXECUTABLE_MODE)
strip_target(condor_schedd,$(STRIP_DIR)/sbin,EXECUTABLE_MODE)
static_target(condor_schedd,$(OBJ),$(LIB),$(STATIC_DIR)/sbin)

