CFLAGS = $(STD_C_FLAGS) -DDEBUG
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) -DDEBUG

SRC = network2.c gen_lib.C fileinfo2.C fileindex2.C imds2.C xferstat2.C \
	signal2.C alarm2.C server2.C xfer_summary.C replication.C

OBJ = network2.o gen_lib.o fileinfo2.o fileindex2.o imds2.o xferstat2.o \
	signal2.o alarm2.o server2.o xfer_summary.o replication.o

UTIL_LIB = ../condor_util_lib/util_lib.a
C_PLUS_UTIL_LIB = ../condor_c++_util/cplus_lib.a
CLASSAD_LIB = ../condor_classad/expr_lib.a

LIB = $(C_PLUS_UTIL_LIB) $(CLASSAD_LIB) $(UTIL_LIB) 
LDFLAGS = -lm SocketLib

SERVER_API_OBJ = network2.o server_interface.o

all_target(condor_ckpt_server ckpt_server_api.a)

c_plus_target(condor_ckpt_server,$(OBJ),$(LIB))
pure_c_plus_target(condor_ckpt_server.pure,$(OBJ),$(LIB))

library_target(ckpt_server_api.a,$(SERVER_API_OBJ))

release:

strip_target(condor_ckpt_server,../strip_ckpt_server/sbin,EXECUTABLE_MODE)
static_target(condor_ckpt_server,$(OBJ),$(LIB),../static_ckpt_server/sbin)

depend_target($(SRC))
