#!/usr/bin/env python

import sys
import classad
import htcondor

if len(sys.argv) < 3:
    print("Usage: {0} <classad> <expr>[ <expr>]*".format(sys.argv[0]))
    print("       You may substitute '-file <file>' for '<classad>'.");
    exit(-1)

adString = sys.argv[1]
if adString == "-file":
    sys.argv.pop(1)
    adString = open(sys.argv[1]).read()

for i in range(2,len(sys.argv)):
    exprString = sys.argv[i]
    ad = classad.parseOne(adString)
    expr = classad.ExprTree(exprString)
    result = expr.simplify(ad)
    print(repr(result))

exit(0)
