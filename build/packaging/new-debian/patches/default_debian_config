Description: Specify default config in the table of parameters
  Previously, this configuration was shipped as a big config file.
  This changed in the 8.2.x series and now needs to go into the table of
  parameters -- which is not (yet) comprehensive. Hence, a few variables
  still need to be present in the default config file too.
Forwarded: not-needed
Bug-Debian: http://bugs.debian.org/769100
Author: Michael Hanke <mih@debian.org>

diff --git a/src/condor_utils/param_info.in b/src/condor_utils/param_info.in
index ce0741c403..ce7c893881 100644
--- a/src/condor_utils/param_info.in
+++ b/src/condor_utils/param_info.in
@@ -42,7 +42,7 @@ default=$(LOG)/KernelTuning.log
 type=path
 
 [LINUX_KERNEL_TUNING_SCRIPT]
-default=$(LIBEXEC)/linux_kernel_tuning
+default=/etc/condor/linux_kernel_tuning
 type=path
 
 [COLLECTOR_ENVIRONMENT]
@@ -813,7 +813,7 @@ default=$(RELEASE_DIR)/include
 type=path
 
 [ETC]
-default=$(RELEASE_DIR)/etc
+default=/etc/condor
 type=path
 
 [XAUTHORITY_USERS]
@@ -858,7 +858,7 @@ type=int
 tags=accountant
 
 [SPOOL]
-default=$(LOCAL_DIR)/spool
+default=$(LOCAL_DIR)/spool/condor
 type=path
 tags=schedd,accountant
 
@@ -1442,7 +1442,7 @@ customization=devel
 tags=daemon_core
 
 [COLLECTOR_NAME]
-default=My Pool - $(CONDOR_HOST)
+default=Debian Condor Pool - $(CONDOR_HOST)
 type=string
 usage=the UW-Madison Computer Science Condor Pool is ``UW-Madison CS''.
 tags=collector
@@ -1468,7 +1468,7 @@ type=int
 tags=collector
 
 [CONDOR_ADMIN]
-default=root@$(FULL_HOSTNAME)
+default=root@localhost
 type=string
 customization=normal
 description=HTCondor sends email to this address on pool failure
@@ -1799,7 +1799,7 @@ tags=MAIL,
 
 [MAIL]
 # default location for mail on RHEL is /bin/mail, default on debian is /usr/bin/mail
-default=/bin/mail
+default=/usr/bin/mail
 win32_default=$(BIN)\condor_mail.exe
 type=path
 tags=MAIL,
@@ -2351,7 +2351,7 @@ type=bool
 tags=condor_config
 
 [REQUIRE_LOCAL_CONFIG_FILE]
-default=true
+default=false
 win32_default=false
 type=bool
 tags=condor_config
@@ -2678,7 +2678,7 @@ type=string
 tags=starter,StarterHookMgr
 
 [JAVA_BENCHMARK_TIME]
-default=2
+default=0
 type=int
 usage=If this time is zero or undefined, no Java benchmarks will be run.
 tags=starter,java_detect
@@ -4312,7 +4312,7 @@ description=Classad expression used to set virtual memory rlimit for job
 tags=starter
 
 [INTERACTIVE_SUBMIT_FILE]
-default=$(LIBEXEC)/interactive.sub
+default=/etc/condor/interactive.sub
 version=7.9.0
 type=string
 description=Location of default submit file for condor_submit -i
@@ -4482,7 +4482,7 @@ description=Ganglia Library Search Path
 tags=condor_config
 
 [GANGLIA_LIB64_PATH]
-default=/lib64,/usr/lib64,/usr/local/lib64
+default=/lib,/usr/lib,/usr/local/lib
 type=string
 description=Ganglia 64-bit Library Search Path
 tags=condor_config
@@ -5139,7 +5139,7 @@ type=path
 default=9620
 
 [CRED_STORE_DIR]
-default=$(LOCAL_DIR)/cred_dir
+default=$(LOCAL_DIR)/lib/condor/cred_dir
 type=path
 [CREDD_ARGS]
 default=-p $(CREDD_PORT) -f
diff --git a/src/condor_examples/condor_config.generic.debian.patch b/src/condor_examples/condor_config.generic.debian.patch
index 716edbe07c..7016c6e14e 100644
--- a/src/condor_examples/condor_config.generic.debian.patch
+++ b/src/condor_examples/condor_config.generic.debian.patch
@@ -31,7 +31,7 @@
  #LOCAL_CONFIG_DIR_EXCLUDE_REGEXP = ^((\..*)|(.*~)|(#.*)|(.*\.rpmsave)|(.*\.rpmnew))$
  
  ##  Use a host-based security policy. By default CONDOR_HOST and the local machine will be allowed
-@@ -50,5 +48,34 @@
+@@ -50,5 +48,44 @@
  #FLOCK_TO = condor.cs.wisc.edu, cm.example.edu
  
  ##--------------------------------------------------------------------
@@ -47,7 +47,7 @@
 +RUN     = $(LOCAL_DIR)/run/condor
 +LOG     = $(LOCAL_DIR)/log/condor
 +LOCK    = $(LOCAL_DIR)/lock/condor
-+SPOOL   = $(LOCAL_DIR)/lib/condor/spool
++SPOOL   = $(LOCAL_DIR)/spool/condor
 +EXECUTE = $(LOCAL_DIR)/lib/condor/execute
 +BIN     = $(RELEASE_DIR)/bin
 +LIB     = $(RELEASE_DIR)/lib/condor
@@ -67,3 +67,13 @@
 +##  The list is a comma or space separated list of subsystem names
 +
 +DAEMON_LIST = COLLECTOR, MASTER, NEGOTIATOR, SCHEDD, STARTD
++
++# Don't phone home
++CONDOR_DEVELOPERS = NONE
++CONDOR_DEVELOPERS_COLLECTOR = NONE
++
++SSH_TO_JOB_SSHD_CONFIG_TEMPLATE = /etc/condor/condor_ssh_to_job_sshd_config_template
++
++# Permissions needed to allow a personal HTCondor to work out of the box on Debian
++ALLOW_WRITE = $(CONDOR_HOST) $(IP_ADDRESS) 127.*
++ALLOW_NEGOTIATOR = $(CONDOR_HOST) $(IP_ADDRESS) 127.*
diff --git a/src/condor_examples/condor.service b/src/condor_examples/condor.service
index c2844481eb..6f3886d6bf 100644
--- a/src/condor_examples/condor.service
+++ b/src/condor_examples/condor.service
@@ -1,7 +1,7 @@
 
 [Unit]
 Description=Condor Distributed High-Throughput-Computing
-After=syslog.target network-online.target nslcd.service ypbind.service time-sync.target
+After=network-online.target nslcd.service ypbind.service time-sync.target
 Wants=network-online.target
 # Disabled until HTCondor security fixed.
 # Requires=condor.socket
