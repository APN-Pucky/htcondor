%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:NT-Limitations}Limitations to
Condor under Windows NT} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This release of Condor NT has a number of limitations.  Most of these
are currently being worked on, and should be cleared up in the future.

\begin{enumerate}
\item Condor for Windows NT requires Microsoft Windows NT 4.0, Service Pack 3
or higher.  We recommend Service Pack 5 for Condor NT.

\item This version of Condor NT requires that all files used by Condor NT
must be stored on the local disk.  unfortunately[D[D[D[D[D[D[D[D[D[D[D[unfortunately[D[D[D[D[D[D[D[D[D[D[D[D[D[U[C[C[C[C[C[C[C[C[C[C[C[C, there is not a clear
and consistent way to access networked resources while users are not
logged in (or other users are logged in).

\item This version of Condor NT will only run jobs as a user that has
generic permissions.  Condor NT will automatically create and delete a dynamic
user that runs your job.

\item Condor for Windows NT does not currently support Check pointing, so
if jobs are vacated (killed) before they complete, they will have to be
started over from scratch on a different machine.

\item \Todo

\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:NT-Install}Installation of Condor on Windows NT}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\index{installation!Windows NT|(}
\index{Windows NT!installation|(}
This section contains the instructions for installing the Microsoft
Windows NT version of Condor (Condor NT) at your site.  
The install program will set you up with a slightly customized configuration
file that you can further customize after the installation has completed.

Please read the copyright and disclaimer information in 
section~\ref{sec:copyright-and-disclaimer} on
page~\pageref{sec:copyright-and-disclaimer} of the manual, or in the
file 
\File{LICENSE.TXT}, before proceeding.  Installation and
use of Condor is acknowledgement that you have read and agreed to these
terms.

The Condor NT executable for distribution is packaged in
a single file such as:
\begin{verbatim}
  condor-6.1.8-WINNT40-x86.exe
\end{verbatim}

\index{Windows NT!installation!initial file size}
This file is approximately 5 Mbytes in size, and may be
removed once Condor is fully installed.

Before installing Condor, please consider joining the condor-world mailing
list.  Traffic on this list is kept to an absolute minimum.  It is only
used to announce new releases of Condor.  To subscribe, send a message
to \Email{majordomo@cs.wisc.edu} with the body:
\begin{verbatim}
   subscribe condor-world 
\end{verbatim}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{\label{sec:NT-Preparing-to-Install}Preparing to Install
Condor under Windows NT} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\index{Windows NT!installation!preparation}
Before you install the Windows NT version of Condor at your site,
there are two major
decisions to make about the basic layout of your pool.

\begin{enumerate}
\item What machine will be the central manager?
\item Do I have enough disk space for Condor?
\end{enumerate}

If you feel that you already know the answers to these questions,
skip to the Windows NT Installation Procedure section below,
section~\ref{sec:nt-install-procedure} on
page~\pageref{sec:nt-install-procedure}.
If you are unsure, read on.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{What machine will be the central manager?}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

One machine in your pool must be the central manager.
This is the
centralized information repository for the Condor pool and is also the
machine that matches available machines with waiting
jobs.  If the central manager machine crashes, any currently active
matches in the system will keep running, but no new matches will be
made.  Moreover, most Condor tools will stop working.  Because of the
importance of this machine for the proper functioning of Condor, we
recommend you install it on a machine that is likely to stay up all the
time, or at the very least, one that will be rebooted quickly if it
does crash.  Also, because all the services will send updates (by
default every 5 minutes) to this machine, it is advisable to consider
network traffic and your network layout when choosing the central
manager.

For Personal Condor, your machine will act as your central manager.

Install Condor on the central manager before installing
on the other machines within the pool.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Do I have enough disk space for Condor?}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\index{Windows NT!installation!required disk space}
The Condor release directory takes up a fair amount of space.
The size requirement for the release
directory is approximately 20 Mbytes.

Condor itself, however, needs space to store all of your jobs, and their
input files.  If you will be submitting large amounts of jobs,
you should consider installing Condor on a volume with a large amount
of free space.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{\label{sec:nt-install-procedure}
Installation Procedure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% condor MUST be run as local system
% 
%  root == administrator
%  to install, must be running with administrator privileges
%  the kernel runs as == local system

Installation of Condor must be done by a user with administrator privileges.
After installation, the Condor services will be run under the local system account.
When Condor is running a user job, however, it will run that User job with normal user permissions.
Condor will dynamically create an account, and then delete that account when the job is finished or is removed from the machine.

Download Condor, and start the installation process by running the file (or by double clicking on the file).
The Condor installation is completed by answering questions and choosing options within the following steps.


\begin{description}
\item[If Condor is already installed.]

     For upgrade purposes, you may be running the installation of Condor
     after it has been previously installed.
     In this case, a dialog box will appear before the
     installation of Condor proceeds.
     The question asks if you wish to preserve your current
     Condor configuration files.
     Answer yes or no, as appropriate.
	 
	 If you answer yes, your configuration files will not be changed, and you will proceed to the point where the new binaries will be installed.

     If you answer no, then there will be a second question
     that asks if you want to use answers
     given during the previous installation
     as default answers.

\item[STEP 1: License Agreement.]

     The first step in installing Condor
     is a welcome screen and license agreement.
     You are reminded that it is best to run the installation
     when no other Windows programs are running.
	 If you need to close other Windows NT programs, it is safe to cancel the
	 installation and close them.
     You are asked to agree to the license.
     Answer yes or no.  If you should disagree with the License, the
	 installation will not continue.

     After agreeing to the license terms, the next Window is where 
     fill in your name and company information,
     or use the defaults as given.

\item[STEP 2: Condor Pool Configuration.]

     The Condor NT installation will require different
     information depending on whether the installer will
	 be creating a new pool, or joining an existing one.

     If you are creating a new pool, the installation program
	 requires that this machine is the central manager.  
     For the creation of a new Condor pool, you will be asked
	 some basic information about your new pool:
     \begin{description}
     \item[Name of the pool]
     \item[hostname] of this machine.
%  Derek hath declared the Statistics not worthy of prime time.
%     \item[Do you want to keep statistics?]
%       Answer yes or no, as appropriate.
%       If yes, then the maximum amount of data accumulated will
%       be 10 Mbytes.
%       A configurable quantity, \Macro{POOL\_HISTORY\_MAX\_STORAGE}
%       sets the maximum amount of data, and it
%       defaults to 10 Mbytes.
%       If no, then the Condor View client will not have data to display.
     \item[Size of pool]
       Condor needs to know if this a Personal Condor installation,
       or if there will be more than one machine in the pool.
\index{Windows NT!installation!Personal Condor}
\index{Personal Condor}
       A Personal Condor pool
       implies that there is only one machine in the pool.
       For Personal Condor, several of the following
       steps are omitted as noted.
     \end{description}

     If you are joining an existing pool, all the installation program
	 requires is the hostname of the central manager for your pool.

\item[STEP 3: This Machine's Roles.] 

     This step is omitted for the installation of Personal Condor.

     Each machine within a Condor pool may either
     submit jobs or execute submitted jobs, or both
     submit and execute jobs.
     This step allows the installation on this machine
     to choose if the machine will only submit jobs,
     only execute submitted jobs, or both.
     The common case is both, so the default is both.

\item[STEP 4: Where will Condor be installed?]

\index{Windows NT!installation!location of files}
The next step is where the destination of the Condor files will be
decided.
It is recommended that Condor be installed in the location shown as the default in the dialog box:
\File{C:\Bs Condor}.

Installation on the local disk is chosen for several reasons.

The Condor services run as local system, and within Microsoft Windows NT, local system has no network privileges.
Therefore, for Condor to operate, Condor should be installed on a local hard drive as opposed to a network drive (file server).

The second reason for installation on the local disk is that
the Windows NT usage of drive letters has implications for where
Condor is placed.
The drive letter used must be not change, even when different users are
logged in.
Local drive letters do not change under normal operation of Windows NT.

While it is strongly discouraged, it may be possible to place Condor on a hard drive that is not local,  if a dependency is added to the service control manager
such that Condor starts after the required file services
are available.

%  !! goes in C:/condor   (default)
%  !! advice is really should go on local hard drive,
%  as opposed to a network drive (also called file server)
%  Because,
%    1. Condor runs as local system, and accesses to a network
%      drive can't be authenticated  -- local system has
%      no network privileges.
%    2.  it is likely that you don't have this set up:
%    (and you need it to make it work)
%    you can add a dependency in the service control manager
%    that condor should start after the file services are
%    available
%    3. drive letters are "system-wide"
%    Must have dedicated letter (for all users), that remains
%    intact for all time, or condor won't know where
%    things are and can't get access (without its "letter")


\item[STEP 5: Where should Condor send e-mail if things go wrong?]

     Various parts of Condor will send e-mail to a Condor administrator
     if something goes wrong and requires human attention.
     You specify the e-mail address and the SMTP relay host
     of this administrator.  Please pay close attention to this email
	 since it will indicate problems in your Condor pool.

\item[STEP 6: The domain.]

% not really used right now.  "Things that suck about NT."
% UNIX has 2 domains:  file system domain and user-ID domain
% NT has only 1:  a combination, and so going back to letter
% drives, things get screwed up.
     This step is omitted for the installation of Personal Condor.

     Enter the machine's accounting (or UID) domain.
	 On this version of Condor for Windows NT, this setting only used for User priorities (see section~\ref{sec:UserPrio} on page~\pageref{sec:UserPrio}).

\item[STEP 7: Access permissions.]
     This step is omitted for the installation of Personal Condor.

     Machines within the Condor pool will need
     various types of access permission. 
     The three categories of permission are read, write,
     and administrator. Enter the machines to be given
     access permissions.

     \begin{description}
     \item[Read]
     Read access allows a machine to obtain information about
     Condor such as the status of machines in the pool and the
     job queues.
     All machines in the pool should be given read access. 
     In addition, giving read access to *.cs.wisc.edu 
     will allow the Condor team to obtain information about
     your Condor pool in the event that debugging is needed.
     \item[Write]
     All machines in the pool should be given write access. 
     It allows the machines you specify to send information to your
	 local Condor daemons, for example, to start a Condor Job.
     Note that for a machine to join the Condor pool, it must have both read and write access to all of the machines in the pool.
     \item[Administrator]
     A machine with administrator access will be allowed more
     extended permission to to things such as
     change other user's priorities, modify the job queue,
     turn Condor services on and off,
     and restart Condor.
     The central manager should be given administrator access
     and is the default listed.
	 This setting is granted to the entire machine, so care should be taken not to make this too open.
     \end{description}

	 For more details on these access permissions, and others that can be
	 manually changed in your \File{condor\_config} file, please
	 see the section titled Security Access Levels at section
	 section~\ref{sec:sec:Security-Access-Levels}
	 on page~\pageref{sec:DCPerm-per-Daemon}.

\item[STEP 8: Job Start Policy.]
     Condor will execute submitted jobs on machines based on
     a preference given at installation.
     Three options are given, and the first is most commonly used
     by Condor pools.
     This specification may be changed or refined in
     the machine ClassAd requirements attribute.

     The three choices:
     \begin{description}
     \item[After 15 minutes of no console activity and low CPU activity.]
     \item[Always run Condor jobs.]
     \item[After 15 minutes of no console activity.]
     \end{description}

\index{Console activity}
     Console activity is the use of the mouse or keyboard.  For instance,
	 if you are reading this document online, and are using either the
	 mouse or the keyboard to change your position, you are generating
	 Console activity.

\index{CPU activity}
     Low CPU activity is defined as a load of less than 30\Percent
	 (and is configurable in your \File{condor\_config} file).  If you have
	 a multiple processor machine, this is the average percentage of
	 CPU activity for both processors.

	For testing purposes, it is often helpful to use use the Always run Condor
	jobs option.  For production mode, however, most people chose the
	After 15 minutes of no console activity and low CPU activity.

\item[STEP 9: Job Vacate Policy.]
     This step is omitted if Condor jobs are always run as
     the option chosen in STEP 8.

     If Condor is executing a job and the user returns,
	 Condor will immediately suspend the job, and after five minutes
	 Condor will decide what to do with the partially completed job.
     There are currently two options for the job.

     \begin{description}
     \item[The job is killed 5 minutes after your return.]
     The job is suspended immediately once there is console activity.
     If the console activity continues, then the job is
     vacated (killed) after 5 minutes. 
     Since this version does not include check-pointing, the job will
     be restarted from the beginning at a later time.
     The job will be placed back into the queue.
     \item[ Suspend job, leaving it in memory.]
     The job is suspended immediately.  At a later time, when the
	 console activity has stopped for ten minutes, the execution of
	 Condor job will be resumed (the job will be unsuspended).
	 The drawback to this option is that since the job will remain
	 in memory, it will occupy swap space.  In many instances, however,
	 the amount of swap space that the job will occupy is small.
     \end{description}

%    Advice on which to choose goes here.
     So which one do you choose?  Killing a job is less intrusive
	 on the workstation owner than leaving it in memory for a later time.
     A suspended job left in memory will require swap space,
     which could possibly be a scarce resource.
     Leaving a job in memory, however, has the benefit that accumulated
     run time is not lost for a partially completed job.

\item[STEP 10: Review entered information.]
     Check that the entered information is correctly entered.
     You have the option to return to previous dialog boxes to fix entries.
\end{description}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{\label{nt-installed-now-what}
Condor is installed... now what?}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\index{Windows NT!starting the Condor service|(}

After the installation of Condor is completed, Condor can
be started by hand, or you can simply reboot.  The Condor service
will start automatically when you reboot your machine.

To start condor by hand:
\begin{enumerate}
\item From the Start menu, choose Settings.
\item From the Settings menu, choose Control Panel.
\item From the Control Panel, choose Services.
\item From Services, choose Condor, and Start.
\end{enumerate}
\index{Windows NT!starting the Condor service|)}

\index{Windows NT!Condor daemon names}
Run the Task Manager (Control-Shift-Escape) to check that Condor
services are running.  The following tasks should
be running:  
\begin{itemize}
\item \Condor{master.exe}
\item \Condor{negotiator.exe}, if this machine is a central manager.
\item \Condor{collector.exe}, if this machine is a central manager.
\item \Condor{startd.exe}, if you indicated that this Condor node should start jobs
\item \Condor{schedd.exe}, if you indicated that this Condor node should submit jobs
to the Condor pool.
\end{itemize}

Also, you should now be able to open up a new cmd (DOS prompt) window, and
the Condor bin directory should be in your path, so you can issue the normal
Condor commands, such as \condor{q} and \condor{status}.

\index{installation!Windows NT|)}
\index{Windows NT!installation|)}

\subsection{\label{nt-running-now-what}
Condor is running... now what?}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Once Condor services are running, try building
and submitting some test jobs.  See the \File{README} file in the
examples directory
for details.

\Todo
