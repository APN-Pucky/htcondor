%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-4}Stable Release Series 7.4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is a stable release series of Condor.
As usual, only bug fixes (and potentially, ports to new platforms)
will be provided in future 7.4.x releases.
New features will be added in the 7.5.x development series.

The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-4-0}Version 7.4.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item The default configuration file now uses
  \MacroNI{ALLOW}/\MacroNI{DENY} in place of
  \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY}.  We recommend making this
  same change throughout your other configuration files.  That way,
  if your policy depends on the default policy, it should continue to
  work as it did before.  The behavior of these configuration settings
  remains unchanged.  The \MacroNI{ALLOW}/\MacroNI{DENY} lists are
  added to the \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY} lists to form the
  authorization policy.  Both styles support the same syntax.  We would
  like to phase out \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY} to simplify
  the configuration.

\item As of 7.3.2, \Condor{q} \Opt{-xml} output no longer begins with
non-XML consisting of two blank lines followed by a line such as the
following:

\begin{verbatim}
-- Submitter: schedd-name : <IP> : hostname
\end{verbatim}

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Added \MacroNI{SCHEDD\_JOB\_QUEUE\_LOG\_FLUSH\_DELAY} to set an
upper bound in seconds on how long it takes for changes to the job
ad to be visible to JobRouter and Quill.  The default is 5.
Previously, there was no upper limit.  Typically, other activity in
the job queue, such as jobs being submitted or completed would cause
buffered data to be flushed to disk, so the effective upper bound was
a function of how busy the job queue was.

\item \Condor{q} \Arg{-analyze} and \Arg{-better-analyze} now provide
  analysis for scheduler and local universe jobs.  Specifically, the
  \MacroNI{START\_SCHEDULER\_UNIVERSE} and
  \MacroNI{START\_LOCAL\_UNIVERSE} expressions are checked.

\item Added \Attr{TotalLocalRunningJobs}, \Attr{TotalLocalIdleJobs},
\Attr{TotalSchedulerRunningJobs}, and \Attr{TotalSchedulerIdleJobs}
to the published ad for the \Condor{schedd}.  This means that
\Condor{q} \Opt{-analyze} can still give helpful information about
why local or scheduler universe jobs are idle when
\MacroNI{START\_LOCAL\_UNIVERSE} or
\MacroNI{START\_SCHEDULER\_UNIVERSE} refer to these attributes.

% #130
\item Add support for KVM in the vm universe.

% #688
\item The \Condor{vm-gahp} now links with libvirt, rather than calling
virsh command-line tools.

% #760
\item Greatly improved \Condor{gridmanager}'s scalability when handling
many grid-type gt2 grid universe jobs.

\item Latency in submitting and cleaning up Condor-C (grid-type 'condor')
has been improved.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item The default configuration file now uses
  \MacroNI{ALLOW}/\MacroNI{DENY} in place of
  \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY}.  See the release notes above
  for more information.

\item The default value for \MacroNI{MAX\_JOBS\_RUNNING} has changed.
  Previously, it was 200.  Now it is an expression that depends on the
  total amount of memory and the operating system.  The default
  expression requires 1MB of RAM on the submit machine per running
  job.  In some environments and configurations, this is overly
  generous and can be cut by as much as 50\%.  Under Windows, the
  number of running jobs is still capped at 200.  If you wish to set
  it higher, it is recommended to use a 64-bit version of Windows.
  Under unix, the maximum default is now 10,000.  To scale higher, it
  is recommended to examine the system ephemeral port range and extend
  it so that there are at least 2.1 ports per running job.

\item The default value of \MacroNI{RESERVED\_SWAP} is now 0, which
  disables the \Condor{schedd}'s check for sufficient swap space
  before starting more jobs.  The new expression for
  \MacroNI{MAX\_JOBS\_RUNNING} has a more appropriate memory check, so
  we are phasing out \MacroNI{RESERVED\_SWAP}.  In case
  \MacroNI{RESERVED\_SWAP} is enabled, we have changed the default value
  of \MacroNI{SHADOW\_SIZE\_ESTIMATE} to 800 (kilobytes).  Previously,
  it was 200 if not set but it was set to 1800 in the example configuration
  file.

\item The default values of \MacroNI{START\_LOCAL\_UNIVERSE} and
  \MacroNI{START\_SCHEDULER\_UNIVERSE} have changed.  Previously,
  these were simply set to \Expr{True}.  Now, they are configured to allow
  up to 200 local universe and 200 scheduler universe jobs to run.

\item The default value of
  \MacroNI{GRIDMANAGER\_MAX\_SUBMITTED\_JOBS\_PER\_RESOURCE} has
  changed from 100 to 1000.

\item The default \MacroNI{NEGOTIATOR\_INTERVAL} has changed from 300 to 60.

\item The default value of \MacroNI{ENABLE\_GRID\_MONITOR} has been
  changed from \Expr{False} to \Expr{True}.  Previously, this variable
  was assigned to \Expr{True} in the example configuration file, so
  many installations would have been using the grid monitor even
  though the default when the variable is not defined in the
  configuration file was not to use the grid monitor.

% #631
\item \MacroNI{VM\_VERSION} has been removed, as has the machine ad
attribute of the same name. \MacroNI{START\_ATTRS} can be used to
add virtual machine version information to the machine ad.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Under windows, if a job ClassAd update from the starter caused the
job periodic hold or remove policy to become true, there was a 20-second
deadlock between the shadow, startd, and starter.

%gittrac #622
\item Fixed a bug that could cause \Condor{dagman} to generate an
illegal rescue DAG if it read events incorrectly in recovery mode
(\Condor{dagman} now checks for events that violate DAG semantics
when reading events in recovery mode, and exits without creating a
rescue DAG if it reads such an event).

% gittrac #744
\item Fixed a bug that could cause \Condor{dagman} to abort if it saw
a combination of a terminated and an aborted event on a node with
retries.

\item Changed some log file warnings in \Condor{dagman} to not be
printed at the default verbosity setting.

\item Fixed a bug originating in 7.1.4.  When a user submitted a job
with an executable that did not have execute permission enabled, and
Condor was running as root, and transfer-files mode was being used,
Condor failed to automatically turn on execute permission after
transferring the file.

\item Fixed a bug from 7.3.2.  The configuration variable
\MacroNI{COUNT\_HYPERTHREAD\_CPUS} was ignored and was effectively
treated as False in all cases.

\item JobRouter was not able to see matchmaking diagnostic attributes
such as \Attr{LastRejMatchTime}.  Therefore, when evaluating policy
expressions that referred to these attributes, they were effectively
treated as though undefined.  Quill was also not able to see these
attributes.

% #822
\item Fixed a bug introduced in 7.3.2 that could cause the
\Condor{gridmanager} to crash repeatedly on startup if the job queue
contained grid-type gt2 jobs that had been previously submitted.

% #724, #774
\item Fixed two bugs related to VOMS introduced in 7.3.2. The first
prevented jobs with X509 proxies from being submitted on platforms
on which Condor doesn't support VOMS. The second prevented submission
of jobs with VOMS proxies if the authenticity of the VOMS extensions
couldn't be verified.

\item Fixed a bad default in \Attr{batch\_gahp.config} that prevented
Condor from observing job state changes for grid-type pbs and lsf grid
universe jobs.

% #748
\item Fixed a bug that caused Condor-C jobs to fail if
\Attr{transfer\_executable} was set to \Opt{False}.

% #784
\item Fix a bug that caused Condor-C jobs to fail if the executable
or stdin/out/err filenames contained a comma.

% #460
\item File transfer for grid-type gt4 jobs requires an empty directory
in \Attr{/tmp}, which the \Condor{gridmanager} creates. If this directory
is deleted, the \Condor{gridmanager} will now recreate it.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}

