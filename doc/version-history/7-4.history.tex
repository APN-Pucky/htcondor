%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-4}Stable Release Series 7.4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is a stable release series of Condor.
As usual, only bug fixes (and potentially, ports to new platforms)
will be provided in future 7.4.x releases.
New features will be added in the 7.5.x development series.

The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-4-1}Version 7.4.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item None.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item None.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-4-0}Version 7.4.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item The default configuration file within the release now uses
  \MacroNI{ALLOW}/\MacroNI{DENY} in place of
  \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY} for security related settings.
  We recommend making this
  same change throughout all configuration files.  That way,
  a policy that depends on the default policy should continue to
  work as it did before.  The behavior of these configuration variables
  remains unchanged.  The \MacroNI{ALLOW}/\MacroNI{DENY} lists are
  added to the \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY} lists to form the
  authorization policy.  Both styles support the same syntax.  
  This change permits an anticipated
  phasing out of the \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY}  configuration
  variables, in order to simplify configuration.

\item As of Condor version 7.3.2, \Condor{q} \Opt{-xml} output no longer 
  begins with the non-XML consisting of two blank lines followed by a line
  of the following form:

\begin{verbatim}
-- Submitter: schedd-name : <IP> : hostname
\end{verbatim}

\item All \Prog{Stork} data placement is now supported by the Stork
project at the 
LSU Center for Computation and Technology
(\URL{http://www.cct.lsu.edu/www.cct.lsu.edu}).
Please see the home page of the Stork project at
\URL{http://www.cct.lsu.edu/~kosar/stork/index.php} for details and
software.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item \Condor{q} \Arg{-analyze} and \Arg{-better-analyze} now provide
  analysis for scheduler and local universe jobs.  Specifically, the
  \MacroNI{START\_SCHEDULER\_UNIVERSE} and
  \MacroNI{START\_LOCAL\_UNIVERSE} expressions are checked.

\item Added \Attr{TotalLocalRunningJobs}, \Attr{TotalLocalIdleJobs},
\Attr{TotalSchedulerRunningJobs}, and \Attr{TotalSchedulerIdleJobs}
to the published ad for the \Condor{schedd}.  This means that
\Condor{q} \Opt{-analyze} can still give helpful information about
why local or scheduler universe jobs are idle when
\MacroNI{START\_LOCAL\_UNIVERSE} or
\MacroNI{START\_SCHEDULER\_UNIVERSE} refer to these attributes.

% #688
\item The \Condor{vm-gahp} now links with libvirt, rather than calling
virsh command-line tools.

% #760
\item Greatly improved the \Condor{gridmanager}'s scalability when handling
many grid type gt2 grid universe jobs.

\item Latency in the submission and cleaning up of Condor-C jobs
has been improved.

\item The \Expr{eval()} ClassAd function added in Condor version 7.3.2
is now also understood by the \Condor{job\_router} and
\Condor{q} using the \Opt{-better-analyze} option.

\item The submit command \SubmitCmd{run\_as\_owner} is now supported
for Unix platforms. Previously, it was only supported on Windows platforms.

\item The submit command \SubmitCmd{run\_as\_owner} is now supported
in unix too. Previously, it was only supported in Windows.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item The new configuration variable 
  \Macro{SCHEDD\_JOB\_QUEUE\_LOG\_FLUSH\_DELAY} sets an
  upper bound in seconds on how long it takes for changes to the job
  ClassAd to be visible to the Condor Job Router and to Quill.
  The default value is 5 seconds.
  Previously, there was no upper limit.  Typically, other activity in
  the job queue, such as jobs being submitted or completed would cause
  buffered data to be flushed to disk, such that the effective upper bound was
  a function of how busy the job queue was.

\item The default configuration file now uses
  \MacroNI{ALLOW}/\MacroNI{DENY} in place of
  \MacroNI{HOSTALLOW}/\MacroNI{HOSTDENY}.  See the release notes above
  for more information.

\item The default value for \Macro{MAX\_JOBS\_RUNNING} has changed.
  Previously, it was 200.  Now it is defined by an expression that depends 
  on the total amount of memory and the operating system.  The default
  expression requires 1MByte of RAM per running job, on the submit machine.
  In some environments and configurations, this is overly
  generous and can be cut by as much as 50\%.  Under Windows, the
  number of running jobs is still capped at 200.
  A 64-bit version of Windows  is recommended in order to raise the value
  above the default.
  Under Unix, the maximum default is now 10,000.  To scale higher, we
  recommend that the system ephemeral port range is extended
  such that there are at least 2.1 ports per running job.

\item The default value of \MacroNI{RESERVED\_SWAP} has changed to
  the value 0, which
  disables the \Condor{schedd} daemon's check for sufficient swap space
  before starting more jobs.  The new expression defined with 
  \MacroNI{MAX\_JOBS\_RUNNING} has a more appropriate memory check, so
  the configuration variable \MacroNI{RESERVED\_SWAP} will no longer
  be used in the near future.
  For cases where 
  \MacroNI{RESERVED\_SWAP} is not set to 0, the default value
  of \MacroNI{SHADOW\_SIZE\_ESTIMATE} has changed to 800 Kbytes.
  Previously, it was 200 if not set,
  but it was set to 1800 in the example configuration file.

\item The default values of \Macro{START\_LOCAL\_UNIVERSE} and
  \Macro{START\_SCHEDULER\_UNIVERSE} have changed.  Previously,
  these were set to \Expr{True}.  Now, they are set using an expression
  that allows
  up to 200 local universe and 200 scheduler universe jobs to run.

\item The default value of
  \Macro{GRIDMANAGER\_MAX\_SUBMITTED\_JOBS\_PER\_RESOURCE} has
  changed from 100 to 1000.

\item The default \Macro{NEGOTIATOR\_INTERVAL} has changed from 300 to 60.

\item The default value of \Macro{ENABLE\_GRID\_MONITOR} has been
  changed from \Expr{False} to \Expr{True}.  This variable
  was assigned to \Expr{True} in the example configuration file, so
  the change in default value now matches the value set in the example
  configuration.

% #631
\item The configuration variable \MacroNI{VM\_VERSION} has been removed,
as has the machine ad attribute of the same name.
When the virtual machine version information is needed in the machine ClassAd,
the configuration variable \MacroNI{STARTD\_ATTRS} can be used to
add it.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item A Windows platform bug has been fixed.
The bug caused a 20-second interval in which
the \Condor{shadow}, \Condor{startd}, and \Condor{starter} daemons
appeared as deadlocked. 
The bug was visible if a job ClassAd update from the \Condor{starter} caused
the job's periodic hold or remove policy to become \Expr{True}.

%gittrac #622
\item Fixed a bug that could cause \Condor{dagman} to generate an
illegal rescue DAG, if it read events incorrectly in recovery mode.
\Condor{dagman} now checks for events that violate DAG semantics
when reading events in recovery mode, and it exits without creating a
rescue DAG if it reads such an event.

% gittrac #744
\item Fixed a bug that could cause \Condor{dagman} to abort if it saw
the combination of a terminated and an aborted event on a node with
retries.

\item Changed some log file warnings in \Condor{dagman} to not be
printed at the default verbosity setting.

% gittrac #825
\item The version compatibility checking between a \File{.condor.sub}
file and the \Condor{dagman} binary which is done at DAG startup,
is now much more permissive.
Currently, \File{.condor.sub} files with
Condor versions of 7.1.2 and later accepted by \Condor{dagman}.

% gittrac #851
\item Fixed a bug introduced with the new \Condor{dagman} lazy log file
evaluation code in Condor version 7.3.2.
The bug sometimes caused failure when running rescue DAGs.

\item Fixed a bug originating in Condor version 7.1.4.
When a user submitted a job
with an executable that did not have execute permission enabled,
Condor was running as root, and file transfer was specified in the job,
Condor failed to automatically turn on execute permission after
transferring the file.

\item Fixed a bug that appeared in Condor version 7.3.2.
The configuration variable
\MacroNI{COUNT\_HYPERTHREAD\_CPUS} was ignored and was effectively
treated as \Expr{False} in all cases.

\item Fixed a bug in which the Condor Job Router was not able
to see matchmaking diagnostic attributes such as \Attr{LastRejMatchTime}.
Therefore, when evaluating policy
expressions that referred to these attributes, they were effectively
treated as though \Expr{Undefined}.
Quill was also not able to see these attributes.

% #822
\item Fixed a bug introduced in Condor version 7.3.2 that could cause the
\Condor{gridmanager} to crash repeatedly on startup,
if the job queue
contained grid type gt2 jobs that had been previously submitted.

% #724, #774
\item Fixed two bugs related to VOMS, introduced in Condor version 7.3.2.
The first bug
prevented jobs with X.509 proxies from being submitted on platforms
on which Condor does not support VOMS.
The second bug prevented submission
of jobs with VOMS proxies, if the authenticity of the VOMS extensions
could not be verified.

\item Fixed a bad default in the \Attr{batch\_gahp.config} file,
that prevented
Condor from observing job state changes for grid type pbs and lsf grid
universe jobs.

% #748
\item Fixed a bug that caused Condor-C jobs to fail if
the submit description file command \SubmitCmd{transfer\_executable}
was set to \Expr{False}.

% #784
\item Fixed a bug that caused Condor-C jobs to fail if the executable
or one of the \File{stdin}, \File{stdout}, or \File{stderr} file names
contained a comma.

% #460
\item File transfer for grid type gt4 jobs requires an empty directory
in \Attr{/tmp}, which the \Condor{gridmanager} creates. If this directory
is deleted, the \Condor{gridmanager} will now recreate it.

%gittrac #790
\item Fixed a bug that could cause the user job log to become
  corrupted on Windows.  This bug would manifest itself only if the
  same log file was specified with different paths.  For example, the
  following submit file could trigger this:

\item Fixed a memory leak in the \Condor{collector} daemon that was introduced
in 7.3.2.

\begin{verbatim}
...
initialdir = /data/job1
log = ../JobLog
queue

initialdir = /data/job2
log = ../JobLog
queue
\end{verbatim}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}

