%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-3}Development Release Series 7.3}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is the development release series of Condor.
The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-3-1}Version 7.3.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item None.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item \Condor{q} -analyze and -better-analyze now emit warnings
if the schedd won't runs jobs when it is out of swap space or
has hit the MAX\_JOBS\_RUNNING limit.

\item When matchmaking Condor-G jobs to resources, if multiple jobs
match multiple resources, and every job has identical job rank, the
matchmaker would always fill up one particular resource first.  Now,
the resources will be matched in a round robin fashion.  This can be
overridden by setting job rank appropriately.

\item Made the \Condor{schedd} more efficient in how it stores
information about `dollar dollar' expansions in the job ClassAd.
Also made it more efficient in how it contacts the \Condor{negotiator}
to submit `reschedule' requests.

\item Improved JobRouter's heuristic for site throttle adjustment.  It
is now quicker to release the throttle when the failure rate drops
below the configured threshold.

\item Made JobRouter more efficient on startup by improving the way it
reads the job queue log file.

\item Added a accessor class to the user log reader API to allow the
  application to query things about reader state, including the
  difference in the event numbers and log position of 2 states.  This
  can be used by the application to determine the number of events
  missed when missed events are detected.

\item Added the ability to throttle the rate at which jobs are
stopped via \Condor{rm}, \Condor{hold}, \Condor{vacate\_job},
and during a graceful shutdown of the \Condor{schedd} daemon.

\item In the configuration file, Condor now accepts expressions for
the values of configuration parameters that are required to be numbers
or boolean constants.  Note that this does not imply that the
expressions may freely reference ClassAd values in places where they
could not before.  Unless otherwise noted, the expressions are limited
to operations on constants and macro substitutions that evaluate to
constants.  Example:

\begin{verbatim}
SHUTDOWN_GRACEFUL_TIMEOUT = ($(HOUR)*24)
\end{verbatim}

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item Added \Macro{UPDATE\_OFFSET} to cause the \Condor{startd} to
  delay the initial (and all further) updates that it sends to the
  \Condor{collector}.  See \ref{param:UpdateOffset} for more details.

\item Added \Macro{JOB\_STOP\_COUNT} and \Macro{JOB\_STOP\_DELAY}.
This limits the rate at which jobs are stopped via \Condor{rm},
\Condor{hold}, \Condor{vacate\_job}, and during a graceful shutdown of
the \Condor{schedd} daemon.  The average rate is limited to
\MacroNI{JOB\_STOP\_COUNT}/\MacroNI{JOB\_STOP\_DELAY} jobs/second.
The special value \MacroNI{JOB\_STOP\_DELAY}=0 indicates no limit;
this is the default.  These settings do not apply to grid or scheduler
universe jobs.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a problem with job removal in the local universe that 
would cause spurious error messages to be written to the SchedLog.

\item The \Condor{schedd} was failing to send `reschedule' commands to
flocked negotiators, so unless some other schedd in the negotiator's
pool sent it a reschedule command, negotiation cycles would only
happen every \Macro{NEGOTIATOR\_INTERVAL}.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-3-0}Version 7.3.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item This release is incompatible when communicating with
previous versions of Condor if CCB is enabled or if
\Macro{PRIVATE\_NETWORK\_NAME} is configured.

\item Updated the DRMAA version.
This new version is compliant with GFD.133,
the DRMAA 1.0 grid recommendation standard.
Three new functions were added to meet the specification's requirements,
and several bugs were fixed.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Added support for using any recognized script as an executable
in a submit file on Windows. For more information please see
section~\ref{sec:windows-scripts-as-executables} on
page~\pageref{sec:windows-scripts-as-executables}.

\item Improved support for private networks:
Added CCB, the Condor Connection Broker.  It is similar in
functionality to GCB, the Generic Connection Broker, but it has
several advantages, including ease of use and working on Windows as
well as Unix platforms.
GCB continues to work, but we may remove
it some time in the 7.3 development series.  The main missing feature
in CCB at the moment that prevents it from replacing GCB,
is support for connectivity from one private network to another.
CCB only works
when connecting from a public network to a private one.  For example,
jobs may be sent from a \Condor{schedd} on the public Internet to 
\Condor{startd} daemons on a
private network, if the \Condor{startd} daemons are configured
to use a CCB server that is accessible to the \Condor{schedd} daemon.
However, if the \Condor{schedd} daemon is on one private
network and the \Condor{startd} daemons are on a different private network,
CCB does not help.  For more information on CCB, see section~ \ref{sec:CCB}.

\item Added support for a CPU affinity on both Windows and Linux platforms.

\item Added support for the \Condor{q} \Opt{-better-analyze} option on Windows.

\item Added \MacroNI{WANT\_HOLD}.  When \MacroNI{PREEMPT} becomes
true, if \MacroNI{WANT\_HOLD} is true, the job is put on hold for the
reason (optionally) specified by \MacroNI{WANT\_HOLD\_REASON} and
\MacroNI{WANT\_HOLD\_SUBCODE}.  These policy expressions are evaluated
by the execute machine.  As usual, the job owner may specify
\AdAttr{periodic\_release} and/or \AdAttr{periodic\_remove}
expressions to react to specific hold states automatically.

\item Added the ClassAd function \Procedure{debug}.
See section~ \ref{sec:classadFunctions} for the details of this function.

% Commented out by Karen, as this is useless to a user taking the
% time to read a version history. More info is needed. 
%\item Log messages have been made more clear.
% Includes: Give a clear warning instead of a terse error, when lacking a COLLECTOR.

\item The \Condor{schedd} can now use MD5 check sums to avoid storing
multiple copies of the same executable in its \Macro{SPOOL} directory.
Note that this feature only affects executables sent to the
\Condor{schedd} via the \SubmitCmd{copy\_to\_spool} command within
a submit description file.

% gittrac #197
\item Reduced the number of sleeps \Condor{dagman} does to maintain log
file consistency when a DAG uses multiple user logs for node jobs.
DAGMan now does one sleep per submit cycle,
instead of one sleep for each submit.

% gittrac #166, #208
\item Added the \Opt{-import\_env} command-line flag to
\Condor{submit\_dag}.  This explicitly puts the submittor's environment
into the \File{.condor.sub} file.

\item Optimized the removal of large numbers of jobs.  
Previously, removal of tens of thousands of jobs caused the
\Condor{schedd} daemon to consume
a lot of CPU time for several minutes.

\item Reduced memory usage by the \Condor{shadow} daemon.  Since there is one
\Condor{shadow} process per running job, this helps increase the
number of running jobs that a submit machine can handle.  Under Linux 2.6,
we found that running 10,000 jobs from a single submit machine
requires about 10GBytes of system RAM.  We also found in this case that to
run more than 10,000 simultaneous jobs requires a 64-bit submit
machine.  On a 32-bit Linux platform, kernel memory is exhausted,
regardless of how much additional RAM the system has.

\item Reduced the memory usage of the \Condor{collector} daemon,
when \Expr{UPDATE\_COLLECTOR\_WITH\_TCP = True}.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item The new configuration variable \Macro{OPEN\_VERB\_FOR\_<EXT>\_FILES}
allows the default interpreter for scripts with an extension \textit{EXT} to
be changed.  For more information please see
section~\ref{sec:windows-scripts-as-executables} on
page~\pageref{sec:windows-scripts-as-executables}.

\item The new configuration variable \Macro{CCB\_ADDRESS}
configures a daemon to use one or more
CCB servers to allow communication with Condor components outside of
the private network.  See page~\pageref{sec:CCB}.

\item The new configuration variable \Macro{MAX\_FILE\_DESCRIPTORS}
(on Unix platforms only) specifies the
required file descriptor limit for a Condor daemon.  File descriptors
are a system resource used for open files and for network connections.
Condor daemons that make many simultaneous network connections may
require an increased number of file descriptors.  For example, see
page~\pageref{sec:CCB} for information on file descriptor requirements
of CCB.

\item The new configuration variables \Macro{ENFORCE\_CPU\_AFFINITY} and 
\Macro{SLOTx\_CPU\_AFFINITY} on Linux platforms allow for
Condor to lock slots to given CPUs.
Definitions for these variables are at \ref{param:EnforceCpuAffinity}.

\item The new configuration variable \Macro{DEBUG\_TIME\_FORMAT}
  allows a custom specification for the format of the time
  printed at the start of each line in a daemon's log file.
  See \ref{param:DebugTimeFormat} for the complete definition of
  this variable.

\item The new configuration variable \Macro{SHARE\_SPOOLED\_EXECUTABLES}
  is a boolean value that determines whether the \Condor{schedd} daemon will
  use MD5 check sums to avoid storing multiple copies of the same
  executable in the \MacroNI{SPOOL} directory. The default setting is
  \Expr{True}.

\item The new boolean configuration variable
  \Macro{EVENT\_LOG\_FSYNC} provides control of the behavior of
  Condor when writing events to the event log.  Previously,
  the behavior was as if this parameter were set to \Expr{False}.
  See \ref{param:EventLogFsync} for the complete definition of
  this variable.

\item The new boolean configuration variable
  \Macro{EVENT\_LOG\_LOCKING} provides control of the behavior of
  Condor when writing events to the event log.  Previously,
  the behavior was controlled by \MacroNI{ENABLE\_USERLOG\_LOCKING}.
  See \ref{param:EventLogLocking} for the complete definition of
  this variable.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item None.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}
