%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-1}Development Release Series 7.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is the development release series of Condor.
The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-1}Version 7.1.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item None.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Condor now coerces the result of \$\$([]) expressions in
submit files to strings.  This means that submit files can do simple 
math.  For example, you can describe a command-line argument as:

arguments = \$\$([\$(PROCESS)+100])

and condor\_submit will expand the argument to be the expected
value.

\item Condor daemons now periodically update the ctime of their
log files, instead of the mtime, as they used to.  At startup, the
daemons use this ctime to determine how long they may have been down.

\item Added the capability to the \Condor{startd} to allow it to power 
  down machines based a user specified policy.  See 
  section~\ref{sec:power-man} on \pageref{sec:power-man} on
  ``Power Management'' for more details.

\item \Condor{off} now supports the \Opt{-peaceful} option for the
schedd, in addition to the existing support that already existed for
the startd.  When peacefully shut down, the schedd stops starting new
jobs and waits for all running jobs to finish before exiting.  The
default shutdown behavior is still \Opt{-graceful}, which checkpoints
and stops all running standard universe jobs and gracefully
disconnects from other types of jobs in the hopes of later restarting
and reconnecting to them without any disturbance to the running job.

\item The \Condor{job\_router} now supports deletion of attributes
when transforming job ClassAds from vanilla to grid universe.  It also
behaves more deterministically when choosing from multiple possible
routes.  Rather than picking one randomly, it simply uses round-robin
scheduling.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item Added the \MacroNI{HIBERNATE\_CHECK\_INTERVAL} macro, which, if
  set to a non-zero value, enables the \Condor{startd} to place the 
  machine in a low power state based on the evaluation of the
  \MacroNI{HIBERNATE} expression.  See 
  page~\pageref{param:HibernateCheckInterval} for more information.

\item Added the \MacroNI{HIBERNATE} expression, which, when evaluated in
  the context of each slot, determines if it a machine should enter
  a low power state. See page~\pageref{param:Hibernate} for more 
  information.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed bug in classad string function, so that it now properly
converts integers and floats to their string representation.

\item Windows Installer is now completely internationalized: it will no 
  longer fail to install because of a missing "Users" group; instead, it
  will use the regionally appropriate group.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item The manual now contains Windows installation instructions for
  controlling the configuration of VM Universe.

\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-0}Version 7.1.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Upgrading to 7.1.0 from previous versions of Condor will make
existing Standard Universe jobs that have already run fail to match to
machines running Condor 7.1.0 unless the job previously ran on a
machine using the Red Hat 5.0 release of Condor.  This is because the
value of the \Attr{CheckpointPlatform} attribute of the machine
ClassAd has changed in order to better represent checkpoint
compatibility.  If this affects you, you can use \Condor{qedit} to
change the \Attr{LastCheckpointPlatform} attribute of existing
Standard Universe jobs to match the new \Attr{CheckpointPlatform}
advertised by the machine ClassAd where the job last ran.

\item Condor no longer supports root configuration files
(for example, \File{/etc/condor/condor\_config.root},
\File{~condor/condor\_config.root}, and
the file defined by the configuration variable
\MacroNI{LOCAL\_ROOT\_CONFIG\_FILE}).  This feature was intended to
give limited powers to a Unix administrator to configure some aspects
of Condor without gaining root powers.  However, given the flexibility
of the configuration system, we decided that this was not practical.
As long as Condor is started up as root, it should be clearly
understood that whoever has the ability to edit the Condor
configuration files can effectively run arbitrary programs as root.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item In the past, Condor has always sent work to the execute machines
  by pushing jobs to the \Condor{startd}, either from the
  \Condor{schedd} or via \Condor{cod}.
  As of version 7.1.0, The \Condor{startd} now has the ability to pull
  work by fetching jobs via a system of plug-ins or hooks.
  Additional hooks are invoked by the \Condor{starter} to help manage
  work (especially for fetched jobs, but the \Condor{starter} hooks
  can be defined and invoked for other kinds of jobs as well).
  For a complete description of the new hook system, read
  section~\ref{sec:job-hooks} on page~\pageref{sec:job-hooks}.

% PR 888/921
\item Added the capability to insert commands into the \File{.condor.sub}
  file produced by \Condor{submit\_dag} with the \Opt{-append} and
  \Opt{-insert\_sub\_file} command-line arguments to \Condor{submit\_dag} and
  the \Macro{DAGMAN\_INSERT\_SUB\_FILE} configuration variable.
  See the \Condor{submit\_dag} manual page on
  page~\pageref{man-condor-submit-dag}
  and the configuration variable definition on
  page~\pageref{param:DAGManInsertSubFile} for more information.

\item For platforms running a Windows operating system, the \Attr{Arch}
  machine ClassAd attribute more correctly reflects the architectures
  supported.  Instead of values \AdStr{INTEL} and \AdStr{UNDEFINED},
  the values will now be: \AdStr{INTEL} for x86,
  \AdStr{IA64} for Intel Itanium,
  and \AdStr{X86\_64} for both AMD and Intel 64-bit processors.
  These values are listed in the unnumbered subsection labeled
  Machine ClassAd Attributes on page~\pageref{sec:Machine-ClassAd-Attributes}.

\item The Windows MSI installer now supports extended \SubmitCmd{vm} universe 
  options. These new options include: the ability to set the 
  networking type, how much memory the \SubmitCmd{vm} universe can use 
  on a host, and
  the ability to set the version of \Prog{VMware} installed on the host.

\item The \Condor{status} and \Condor{q} command line tools now have a
  version option which prints the version of those specific tools.  This
  can be useful when multiple versions of Condor are installed on the
  same machine.

\item The configuration variable \MacroNI{CONDOR\_VIEW\_HOST} may now
  contain a port number and may (if desired) refer to a
  \Condor{collector} daemon running on the same host as the
  \Condor{collector} that is forwarding ads.  It is also now possible to
  use the forwarded ads for matchmaking purposes.  For example, several
  collectors could forward ads to a single aggregating collector which
  a \Condor{negotiator} then uses as its source of information for
  matchmaking.

\item Added client-side authorization controls
\MacroNI{ALLOW\_CLIENT}, \MacroNI{DENY\_CLIENT}.  When using a mutual
authentication method (e.g. GSI, SSL, Kerberos), this allows you to
specify what authenticated servers Condor tools and daemons should
trust when they form a connection to the server.  This deprecates
\MacroNI{GSI\_DAEMON\_NAME}, which provided rudimentary support for
client-side authorization in a GSI-specific way.

% PR 598/788
\item \Condor{dagman} deals with rescue DAGs in a more sophisticated
way; this is especially helpful for nested DAGs.
See the rescue DAG subsection~\pageref{sec:DAGRescue} of the \Condor{dagman}
manual section for more information.

\item Additional logging details for unusual error cases to help 
identify problems.

\item A new (optional) daemon named \Condor{job\_router} has been
added, so far only on unix.  It may be configured to transform vanilla
universe jobs into grid universe jobs, for example to send excess jobs
to other sites via Condor-C or Condor-G.  For details, see
page~\pageref{sec:JobRouter}.

\item Previously, \condor{q} \Opt{-better-analyze} was supported on most
but not all versions of Linux.  It is now supported on all Unix platforms
but not yet on Windows.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

% PR 921
\item Added the \Macro{DAGMAN\_INSERT\_SUB\_FILE} variable, which allows a file
  of commands to be inserted into \File{.condor.sub} files generated
  by \Condor{submit\_dag}.  See page~\pageref{param:DAGManInsertSubFile}
  for more information.

\item The semantics of \MacroNI{CLAIM\_WORKLIFE} were previously not
clearly defined before the start of the first job.  A delay between
the \Condor{schedd} claiming a slot and the \Condor{shadow} starting a
job could be caused by the submit machine being very busy or by
\MacroNI{JOB\_START\_DELAY}.  Previously, such a delay would
unpredictably result in the first job being rejected if
\MacroNI{CLAIM\_WORKLIFE} expired during that time.  Now,
\MacroNI{CLAIM\_WORKLIFE} is defined to apply only after the first job
has started.  Therefore, setting it to zero has the effect of allowing
exactly one job per claim to run.  The default is still the special
value -1, which places no limit on how long the slot may continue
accepting new jobs from the \Condor{schedd} that claimed it.

% PR 598/788
\item Added the \Macro{DAGMAN\_OLD\_RESCUE} variable, which controls whether
\Condor{dagman} writes rescue DAGs in the old way.  See
page~\pageref{param:DAGManOldRescue} for more information.

% PR 598/788
\item Added the \Macro{DAGMAN\_AUTO\_RESCUE} variable, which controls
whether \Condor{dagman} automatically runs an existing rescue DAG.
See page~\pageref{param:DAGManAutoRescue} for more information.

% PR 598/788
\item Added the \Macro{DAGMAN\_MAX\_RESCUE\_NUM} variable, which
controls the maximum "new-style" rescue DAG number written or
automatically run by \Condor{dagman}.
See page~\pageref{param:DAGManMaxRescueNum} for more information.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item The Condor Build ID is now printed by \Condor{version} and placed 
  in the logs for machines running a Windows operating system.

\item \Condor{quill} and the \Condor{dbmsd} correctly register 
  themselves with the Windows firewall.

% PR 926
\item \Condor{submit\_dag} now avoids possibly running off the end
of the argument list if an argument requiring a value does not have one.

\item The \Condor{submit\_dag} \Opt{-debug} argument now must be
specified with at least \Opt{-de} to avoid conflict with the
\Opt{-dagman} argument.

\item Added missing information about the \Opt{-config} argument to
\Condor{submit\_dag}'s usage message.

% PR 927
\item \Condor{dagman} no longer considers duplicate edges in a DAG a
fatal error (it is now a warning).

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item No hook is invoked if a fetched job does not contain enough data
  to be spawned by a \Condor{starter} or if other errors prevent the
  job from being run after the \Condor{startd} agrees to accept the
  work.
  This limitation will be addressed in a future version of Condor,
  most likely via the addition of a new hook invoked whenver the
  \Condor{starter} fails to spawn a job.
  For more information about the new hook system included in Condor
  version 7.1.0, read section~\ref{sec:job-hooks} on
  page~\pageref{sec:job-hooks}.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item Added \AdStr{WINNT60} for the Vista operating system to
  the documented list of possible values for the machine ClassAd
  attribute \AdAttr{OpSys}.

\end{itemize}

